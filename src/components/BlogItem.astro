---
import moment from 'moment';

const { post, path, loading, showHeading } = Astro.props;

const timeMachineReadable = moment.unix(post.time).format();
const timeHumanReadable = moment.unix(post.time).format('MMM DD, H:mm');

const images = (post.images || []).map(image => ({
  ...image,
  path: `/images/${image.file}.webp`
}));
---

<article>
  {images.length > 0 &&
    <ul>
      {images.map(image => <li><img src={image.path} width={image.w} height={image.h} loading={loading} /></li>)}
    </ul>
  }

  <div class="blog-item-content">
    {post.title && showHeading &&
      <h1>{post.title}</h1>
    }
    <slot />
  </div>

  <footer>
    <a href={path} title="Permalink">
      <time datetime={timeMachineReadable}>â†’ {timeHumanReadable}</time>
    </a>
    <ul>
      {post.tags.map(tag => <li>{tag}</li>)}
    </ul>
  </footer>
</article>
