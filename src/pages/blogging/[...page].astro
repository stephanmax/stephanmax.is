---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogItem from '../../components/BlogItem.astro';

export async function getStaticPaths({ paginate }) {
  const posts = Astro.fetchContent('./**/*.md');
  const postsSorted = posts.sort((a, b) => b.time - a.time);
  return paginate(postsSorted, { pageSize: 10});
}

const { page } = Astro.props;
const { origin } = Astro.request.url;
---

<BaseLayout>
  {page.data.map(post => <BlogItem post={post} path={post.url}>{post.astro.html}</BlogItem>)}
</BaseLayout>
